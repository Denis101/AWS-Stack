{
  "Description": "LAMP Stack DB servers",
  "Parameters": {
    "InstanceTypeDbserver": {
      "Type": "String",
      "Default": "db.t2.micro"
    },
    "DbEngine": {
      "Type": "String",
      "Default": "MySQL"
    },
    "DbName": {
      "Type": "String",
      "Default": "test"
    },
    "DbUsername": {
      "Type": "String"
    },
    "DbPassword": {
      "Type": "String"
    }
  },
  "Resources": {
    "DbServer": {
      "Type" : "AWS::RDS::DBInstance",
        "Properties" : {
          "DBInstanceIdentifier": {
            "Fn::Join": [ "-",
              [
                { "Ref": "DbEngine" },
                { "Ref": "DbName" },
                "test"
              ]
            ]
          },
          "DBName": { "Ref": "DbName" },
          "AllocatedStorage" : "5",
          "DBInstanceClass" : { "Ref": "InstanceTypeDbserver" },
          "Engine" : { "Ref": "DbEngine" },
          "MasterUsername" : { "Ref": "DbUsername" },
          "MasterUserPassword" : { "Ref": "DbPassword" },
          "Tags": [
            {
              "Key": "role",
              "Value": "dbservers"
            }
          ]
      },
      "DeletionPolicy" : "Snapshot"
    }
  }
}
